(this["webpackJsonpcoin-exchange-table"]=this["webpackJsonpcoin-exchange-table"]||[]).push([[0],{10:function(e,t,r){e.exports={more:"TableRowCell_more__m1jO0",less:"TableRowCell_less__3EWMv"}},14:function(e,t,r){e.exports={root:"TableRow_root__38SN5"}},15:function(e,t,r){e.exports={root:"TableHead_root__fMwGM"}},17:function(e,t,r){e.exports={root:"ToggleLink_root__3P_3e"}},3:function(e,t,r){e.exports={lightTheme:"themes_lightTheme__3p73V",darkTheme:"themes_darkTheme__3K45N"}},52:function(e,t,r){"use strict";r.r(t);var n,a,s=r(1),o=r.n(s),c=r(9),i=r.n(c),u=r(5),l=function(e){return e?"string"===typeof e?e:e>1e-6?String(e):Number(e).toFixed(10):"\u2014"},d=r(10),h=r.n(d),b=r(0),m=r(28).useIsVisible,j=function(e){var t=e.value,r=e.id,n=e.groupId,a=e.allowComparing,o=void 0!==a&&a,c=Object(s.useRef)(null),i=m(c),u=Object(s.useRef)();return Object(s.useEffect)((function(){if(o&&u.current!==t)if(i){if(u.current&&c.current){var e=u.current<t;c.current.className=e?h.a.more:h.a.less}setTimeout((function(){c.current&&(c.current.className="")}),100),u.current=t}else u.current=t}),[c,o,r,n,t,i]),Object(b.jsx)("td",{ref:c,children:l(t)})},f=o.a.memo(j),O=function(e){var t=e.value;return Object(b.jsx)("td",{children:t})},g=o.a.memo(O),p=r(14),x=r.n(p),T=function(e){var t=e.rowData;return Object(b.jsxs)("tr",{className:x.a.root,children:[Object(b.jsx)(g,{value:t.ticker}),Object(b.jsx)(f,{value:t.bid,id:"bid",groupId:t.id,allowComparing:!0}),Object(b.jsx)(f,{value:t.ask,id:"ask",groupId:t.id,allowComparing:!0}),Object(b.jsx)(f,{value:t.high,id:"high",groupId:t.id,allowComparing:!0}),Object(b.jsx)(f,{value:t.low,id:"low",groupId:t.id,allowComparing:!0}),Object(b.jsx)(f,{value:t.last,id:"last",groupId:t.id,allowComparing:!0})]})},k=o.a.memo(T),v=r(15),S=r.n(v),w=r(16),C=r.n(w);!function(e){e.TICKER="id",e.BID="bid",e.ASK="ask",e.HIGH="high",e.LOW="low",e.LAST="last"}(n||(n={})),function(e){e.ASC="asc",e.DESC="desc"}(a||(a={}));var y=function(e){var t=e.sortType,r=e.sortOrder,s=e.onSort,o=function(e,t){return function(r){if(r===e)return C()({"fas fa-sort-amount-up":t===a.ASC,"fas fa-sort-amount-down":t===a.DESC})}}(t,r),c=function(e){return function(){return s(e,e!==t?a.DESC:r===a.DESC?a.ASC:a.DESC)}};return Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{className:S.a.root,children:[Object(b.jsxs)("th",{onClick:c(n.TICKER),children:["Ticker ",Object(b.jsx)("span",{className:o(n.TICKER)})]}),Object(b.jsxs)("th",{onClick:c(n.BID),children:["Bid ",Object(b.jsx)("span",{className:o(n.BID)})]}),Object(b.jsxs)("th",{onClick:c(n.ASK),children:["Ask ",Object(b.jsx)("span",{className:o(n.ASK)})]}),Object(b.jsxs)("th",{onClick:c(n.HIGH),children:["High ",Object(b.jsx)("span",{className:o(n.HIGH)})]}),Object(b.jsxs)("th",{onClick:c(n.LOW),children:["Low ",Object(b.jsx)("span",{className:o(n.LOW)})]}),Object(b.jsxs)("th",{onClick:c(n.LAST),children:["Last ",Object(b.jsx)("span",{className:o(n.LAST)})]})]})})},_=o.a.memo(y),E=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onSort,a=e.sortType,s=e.sortOrder;return Object(b.jsxs)("table",{cellPadding:"0",cellSpacing:"0",children:[Object(b.jsx)(_,{onSort:n,sortOrder:s,sortType:a}),Object(b.jsx)("tbody",{children:u.map(r,(function(e,t){return Object(b.jsx)(k,{rowData:e},e.id)}))})]})},L=o.a.memo(E),I=r(17),N=r.n(I),R=function(e){var t=e.showPrimary,r=e.onToggle,n=e.primaryText,a=e.secondText;return Object(b.jsx)("span",{onClick:r,className:N.a.root,children:t?n:a})},D=o.a.memo(R),A=r(6),q=r.n(A),F=function(e){var t=e.showAllToggle,r=e.table,n=e.themeToggle,a=e.webSocketsStats;return Object(b.jsx)("div",{className:q.a.root,children:Object(b.jsxs)("div",{className:q.a.wrapper,children:[Object(b.jsx)("h1",{children:"Realtime Crypto Trading"}),Object(b.jsxs)("div",{className:q.a.header,children:[t,a,n]}),r]})})},H=o.a.memo(F),P=r(2),B=r(20),K=r(11),M=r.n(K),W=r(18),G=r(19),J=function e(t){var r=this;Object(G.a)(this,e),this.requestId=0,this.requestResolvers={},this.socket=void 0,this.currenciesStore={},this.callbacks=[],this.onChange=function(e){r.callbacks.push(e)},this.offChange=function(e){var t=r.callbacks.indexOf(e);-1!==t&&r.callbacks.splice(t,1)},this.handleOpen=Object(W.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSymbols();case 2:e.sent.result.forEach((function(e,t){r.currenciesStore[e.id]=e,r.subscribeTicker(e.id).catch((function(t){console.warn("No able to make subscription for "+e.id+". Error: "+t)}))}));case 4:case"end":return e.stop()}}),e)}))),this.handleMessage=function(e){var t=JSON.parse(e.data);if("id"in t)return r.requestResolvers[t.id]&&r.requestResolvers[t.id](t);if("ticker"===t.method){var n=t,a=r.currenciesStore[n.params.symbol];r.callbacks.forEach((function(e){return e(a,n.params)}))}},this.getSymbols=function(){return r.makeRequest("getSymbols",{})},this.subscribeTicker=function(e){return r.makeRequest("subscribeTicker",{symbol:e})},this.makeRequest=function(e,t){var n=++r.requestId;return r.socket.send(JSON.stringify({method:e,params:t,id:n})),new Promise((function(e){r.requestResolvers[n]=e}))},this.socket=new WebSocket(t),this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("message",this.handleMessage)},Q=r(3),V=r.n(Q),U=Date.now(),z=function(e){var t=Object(s.useState)({data:{},webSocketsStats:0,sortType:n.BID,sortOrder:a.DESC,limit:e,theme:V.a.lightTheme}),r=Object(B.a)(t,2),c=r[0],i=r[1],l=Object(s.useRef)({}),d=o.a.useRef(0),h=o.a.useRef(0),b=o.a.useRef(0),m=Object(s.useCallback)((function(e){e-h.current>200&&(i((function(e){var t=Math.round(b.current/(Date.now()-U)*1e3);return Object(P.a)(Object(P.a)({},e),{},{webSocketsStats:t,data:Object(P.a)(Object(P.a)({},e.data),l.current)})})),h.current=e),d.current=requestAnimationFrame(m)}),[]);o.a.useEffect((function(){return d.current=requestAnimationFrame(m),function(){return cancelAnimationFrame(d.current)}}),[m]);var j=Object(s.useCallback)((function(e,t){var r=function(e,t){return{id:e.id,ticker:"".concat(e.baseCurrency," / ").concat(e.feeCurrency),bid:parseFloat(t.bid),ask:parseFloat(t.ask),high:parseFloat(t.high),last:parseFloat(t.last),low:parseFloat(t.low)}}(e,t);l.current[r.id]=r,b.current++}),[]);Object(s.useEffect)((function(){var e=new J("wss://api.exchange.bitcoin.com/api/2/ws");return e.onChange(j),function(){return e.offChange(j)}}),[j]);var f=Object(s.useMemo)((function(){return u.chain(c.data).map().sortBy((function(e){return e.last})).reverse().slice(0,c.limit).sortBy((function(e){return e[c.sortType]?e[c.sortType]:0})).thru((function(e){return c.sortOrder===a.DESC&&e.reverse(),e})).value()}),[c]),O=Object(s.useCallback)((function(e,t){return i((function(r){return Object(P.a)(Object(P.a)({},r),{},{sortType:e,sortOrder:t})}))}),[]),g=Object(s.useCallback)((function(){i((function(t){return Object(P.a)(Object(P.a)({},t),{},{limit:t.limit?void 0:e})}))}),[e]),p=c.theme===V.a.lightTheme,x=Object(s.useCallback)((function(){i((function(e){return Object(P.a)(Object(P.a)({},e),{},{theme:p?V.a.darkTheme:V.a.lightTheme})}))}),[p]);return Object(P.a)(Object(P.a)({filteredData:f},c),{},{isLightTheme:p,onSort:O,onLimitToggle:g,onThemeToggle:x})},X=function(e){Object(s.useEffect)((function(){return document.body.classList.add(e),function(){document.body.classList.remove(e)}}),[e])};function Y(){var e=z(25),t=e.webSocketsStats,r=e.theme,n=e.limit,a=e.sortType,s=e.sortOrder,o=e.filteredData,c=e.onLimitToggle,i=e.onThemeToggle,u=e.isLightTheme,l=e.onSort;return X(r),Object(b.jsx)(H,{themeToggle:Object(b.jsx)(D,{showPrimary:u,primaryText:"Dark theme",secondText:"Light theme",onToggle:i}),webSocketsStats:Object(b.jsxs)("i",{children:["Websocket events per second (average): ",t]}),showAllToggle:Object(b.jsx)(D,{showPrimary:!!n,onToggle:c,primaryText:"Show All",secondText:"Show top ".concat(25)}),table:Object(b.jsx)(L,{data:o,sortOrder:s,sortType:a,onSort:l})})}var Z=o.a.memo(Y);var $=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(Z,{})})};i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)($,{})}),document.getElementById("root"))},6:function(e,t,r){e.exports={root:"PageExchangeQuotesLayout_root__3yjHe",wrapper:"PageExchangeQuotesLayout_wrapper__q5U5K",header:"PageExchangeQuotesLayout_header__2Sd9s"}}},[[52,1,2]]]);
//# sourceMappingURL=main.57d529ea.chunk.js.map