(this["webpackJsonpcoin-exchange-table"]=this["webpackJsonpcoin-exchange-table"]||[]).push([[0],{10:function(e,t,r){e.exports={more:"TableRowCell_more__m1jO0",less:"TableRowCell_less__3EWMv"}},15:function(e,t,r){e.exports={root:"TableRow_root__38SN5"}},16:function(e,t,r){e.exports={root:"TableHead_root__fMwGM"}},18:function(e,t,r){e.exports={root:"ToggleLink_root__3P_3e"}},3:function(e,t,r){e.exports={root:"PageExchangeQuotesLayout_root__3yjHe",wrapper:"PageExchangeQuotesLayout_wrapper__q5U5K",header:"PageExchangeQuotesLayout_header__2Sd9s",loaderRoot:"PageExchangeQuotesLayout_loaderRoot__2eDKQ",loaderMsg:"PageExchangeQuotesLayout_loaderMsg__aQ0bQ"}},4:function(e,t,r){e.exports={lightTheme:"themes_lightTheme__3p73V",darkTheme:"themes_darkTheme__3K45N"}},53:function(e,t,r){"use strict";r.r(t);var a,n,s=r(1),o=r.n(s),c=r(9),i=r.n(c),l=r(6),u=r(14),d=r.n(u),b=function(e){if(!e)return"\u2014";if("string"===typeof e)return e;var t=d()();return e>1e-6?t(e):Number(e).toFixed(10)},h=r(10),m=r.n(h),j=r(0),f=r(29).useIsVisible,O=function(e){var t=e.value,r=e.id,a=e.groupId,n=e.allowComparing,o=void 0!==n&&n,c=Object(s.useRef)(null),i=f(c),l=Object(s.useRef)();return Object(s.useEffect)((function(){if(o&&l.current!==t)if(i){if(l.current&&c.current){var e=l.current<t;c.current.className=e?m.a.more:m.a.less}setTimeout((function(){c.current&&(c.current.className="")}),100),l.current=t}else l.current=t}),[c,o,r,a,t,i]),Object(j.jsx)("td",{ref:c,children:b(t)})},g=o.a.memo(O),p=function(e){var t=e.value;return Object(j.jsx)("td",{children:t})},x=o.a.memo(p),k=r(15),v=r.n(k),T=function(e){var t=e.rowData;return Object(j.jsxs)("tr",{className:v.a.root,children:[Object(j.jsx)(x,{value:t.ticker}),Object(j.jsx)(g,{value:t.bid,id:"bid",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.ask,id:"ask",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.high,id:"high",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.low,id:"low",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.last,id:"last",groupId:t.id,allowComparing:!0})]})},S=o.a.memo(T),y=r(16),C=r.n(y),w=r(17),_=r.n(w);!function(e){e.TICKER="id",e.BID="bid",e.ASK="ask",e.HIGH="high",e.LOW="low",e.LAST="last"}(a||(a={})),function(e){e.ASC="asc",e.DESC="desc"}(n||(n={}));var L=function(e){var t=e.sortType,r=e.sortOrder,s=e.onSort,o=function(e,t){return function(r){if(r===e)return _()({"fas fa-sort-amount-up":t===n.ASC,"fas fa-sort-amount-down":t===n.DESC})}}(t,r),c=function(e){return function(){return s(e,e!==t?n.DESC:r===n.DESC?n.ASC:n.DESC)}};return Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:C.a.root,children:[Object(j.jsxs)("th",{onClick:c(a.TICKER),children:["Ticker ",Object(j.jsx)("span",{className:o(a.TICKER)})]}),Object(j.jsxs)("th",{onClick:c(a.BID),children:["Bid ",Object(j.jsx)("span",{className:o(a.BID)})]}),Object(j.jsxs)("th",{onClick:c(a.ASK),children:["Ask ",Object(j.jsx)("span",{className:o(a.ASK)})]}),Object(j.jsxs)("th",{onClick:c(a.HIGH),children:["High ",Object(j.jsx)("span",{className:o(a.HIGH)})]}),Object(j.jsxs)("th",{onClick:c(a.LOW),children:["Low ",Object(j.jsx)("span",{className:o(a.LOW)})]}),Object(j.jsxs)("th",{onClick:c(a.LAST),children:["Last ",Object(j.jsx)("span",{className:o(a.LAST)})]})]})})},E=o.a.memo(L),N=function(e){var t=e.data,r=void 0===t?{}:t,a=e.onSort,n=e.sortType,s=e.sortOrder;return Object(j.jsxs)("table",{cellPadding:"0",cellSpacing:"0",children:[Object(j.jsx)(E,{onSort:a,sortOrder:s,sortType:n}),Object(j.jsx)("tbody",{children:l.map(r,(function(e,t){return Object(j.jsx)(S,{rowData:e},e.id)}))})]})},R=o.a.memo(N),I=r(18),D=r.n(I),A=function(e){var t=e.showPrimary,r=e.onToggle,a=e.primaryText,n=e.secondText;return Object(j.jsx)("span",{onClick:r,className:D.a.root,children:t?a:n})},q=o.a.memo(A),F=r(3),M=r.n(F),P=function(e){var t=e.loading,r=e.showAllToggle,a=e.table,n=e.themeToggle,s=e.webSocketsStats;return Object(j.jsx)("div",{className:M.a.root,children:Object(j.jsxs)("div",{className:M.a.wrapper,children:[Object(j.jsx)("h1",{children:"Realtime Crypto Trading"}),!1===t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:M.a.header,children:[r,s,n]}),a]}):Object(j.jsxs)("div",{className:M.a.loaderRoot,children:[Object(j.jsx)("span",{className:"fas fa-spinner fa-spin"}),Object(j.jsx)("div",{className:M.a.loaderMsg,children:"Loading trade data ..."})]})]})})},H=o.a.memo(P),K=r(2),B=r(21),Q=r(11),W=r.n(Q),G=r(19),J=r(20),V=function e(t){var r=this;Object(J.a)(this,e),this.requestId=0,this.requestResolvers={},this.socket=void 0,this.currenciesStore={},this.callbacks=[],this.symbolsCallbacks=[],this.onLoadSymbols=function(e){r.symbolsCallbacks.push(e)},this.offLoadSymbols=function(e){var t=r.symbolsCallbacks.indexOf(e);-1!==t&&r.symbolsCallbacks.splice(t,1)},this.onChange=function(e){r.callbacks.push(e)},this.offChange=function(e){var t=r.callbacks.indexOf(e);-1!==t&&r.callbacks.splice(t,1)},this.handleOpen=Object(G.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSymbols();case 2:t=e.sent,r.symbolsCallbacks.forEach((function(e){return e()})),t.result.forEach((function(e,t){r.currenciesStore[e.id]=e,r.subscribeTicker(e.id).catch((function(t){console.warn("No able to make subscription for "+e.id+". Error: "+t)}))}));case 5:case"end":return e.stop()}}),e)}))),this.handleMessage=function(e){var t=JSON.parse(e.data);if("id"in t)return r.requestResolvers[t.id]&&r.requestResolvers[t.id](t);if("ticker"===t.method){var a=t,n=r.currenciesStore[a.params.symbol];r.callbacks.forEach((function(e){return e(n,a.params)}))}},this.getSymbols=function(){return r.makeRequest("getSymbols",{})},this.subscribeTicker=function(e){return r.makeRequest("subscribeTicker",{symbol:e})},this.makeRequest=function(e,t){var a=++r.requestId;return r.socket.send(JSON.stringify({method:e,params:t,id:a})),new Promise((function(e){r.requestResolvers[a]=e}))},this.socket=new WebSocket(t),this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("message",this.handleMessage)},U=r(4),z=r.n(U),X=Date.now(),Y=function(e){var t=Object(s.useState)({data:{},webSocketsStats:0,sortType:a.BID,sortOrder:n.DESC,limit:e,theme:z.a.lightTheme,loadingCurrencyList:void 0}),r=Object(B.a)(t,2),c=r[0],i=r[1],u=Object(s.useRef)({}),d=o.a.useRef(0),b=o.a.useRef(0),h=o.a.useRef(0),m=Object(s.useCallback)((function(e){e-b.current>200&&(i((function(e){var t=Math.round(h.current/(Date.now()-X)*1e3);return Object(K.a)(Object(K.a)({},e),{},{webSocketsStats:t,data:Object(K.a)(Object(K.a)({},e.data),u.current)})})),b.current=e),d.current=requestAnimationFrame(m)}),[]);o.a.useEffect((function(){return d.current=requestAnimationFrame(m),function(){return cancelAnimationFrame(d.current)}}),[m]);var j=Object(s.useCallback)((function(e,t){var r=function(e,t){return{id:e.id,ticker:"".concat(e.baseCurrency," / ").concat(e.feeCurrency),bid:parseFloat(t.bid),ask:parseFloat(t.ask),high:parseFloat(t.high),last:parseFloat(t.last),low:parseFloat(t.low)}}(e,t);u.current[r.id]=r,h.current++}),[]),f=Object(s.useCallback)((function(){i((function(e){return Object(K.a)(Object(K.a)({},e),{},{loadingCurrencyList:!1})}))}),[]);Object(s.useEffect)((function(){i((function(e){return Object(K.a)(Object(K.a)({},e),{},{loadingCurrencyList:!0})}));var e=new V("wss://api.exchange.bitcoin.com/api/2/ws");return e.onChange(j),e.onLoadSymbols(f),function(){e.offChange(j),e.offLoadSymbols(f)}}),[j,f]);var O=Object(s.useMemo)((function(){return l.chain(c.data).map().sortBy((function(e){return e.last})).reverse().slice(0,c.limit).sortBy((function(e){return e[c.sortType]?e[c.sortType]:0})).thru((function(e){return c.sortOrder===n.DESC&&e.reverse(),e})).value()}),[c]),g=Object(s.useCallback)((function(e,t){return i((function(r){return Object(K.a)(Object(K.a)({},r),{},{sortType:e,sortOrder:t})}))}),[]),p=Object(s.useCallback)((function(){i((function(t){return Object(K.a)(Object(K.a)({},t),{},{limit:t.limit?void 0:e})}))}),[e]),x=c.theme===z.a.lightTheme,k=Object(s.useCallback)((function(){i((function(e){return Object(K.a)(Object(K.a)({},e),{},{theme:x?z.a.darkTheme:z.a.lightTheme})}))}),[x]);return Object(K.a)(Object(K.a)({filteredData:O},c),{},{isLightTheme:x,onSort:g,onLimitToggle:p,onThemeToggle:k})},Z=function(e){Object(s.useEffect)((function(){return document.body.classList.add(e),function(){document.body.classList.remove(e)}}),[e])};function $(){var e=Y(25),t=e.loadingCurrencyList,r=e.webSocketsStats,a=e.theme,n=e.limit,s=e.sortType,o=e.sortOrder,c=e.filteredData,i=e.onLimitToggle,l=e.onThemeToggle,u=e.isLightTheme,d=e.onSort;return Z(a),Object(j.jsx)(H,{loading:t,themeToggle:Object(j.jsx)(q,{showPrimary:u,primaryText:"Dark theme",secondText:"Light theme",onToggle:l}),webSocketsStats:Object(j.jsxs)("i",{children:["Websocket events per second (average): ",r]}),showAllToggle:Object(j.jsx)(q,{showPrimary:!!n,onToggle:i,primaryText:"Show All",secondText:"Show top ".concat(25)}),table:Object(j.jsx)(R,{data:c,sortOrder:o,sortType:s,onSort:d})})}var ee=o.a.memo($);var te=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ee,{})})};i.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(te,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.bbaf27bc.chunk.js.map