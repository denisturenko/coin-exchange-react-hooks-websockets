(this["webpackJsonpcoin-exchange-table"]=this["webpackJsonpcoin-exchange-table"]||[]).push([[0],{10:function(e,t,r){e.exports={more:"TableRowCell_more__m1jO0",less:"TableRowCell_less__3EWMv"}},15:function(e,t,r){e.exports={root:"TableRow_root__38SN5"}},16:function(e,t,r){e.exports={root:"TableHead_root__fMwGM"}},18:function(e,t,r){e.exports={root:"ToggleLink_root__3P_3e"}},3:function(e,t,r){e.exports={lightTheme:"themes_lightTheme__3p73V",darkTheme:"themes_darkTheme__3K45N"}},53:function(e,t,r){"use strict";r.r(t);var n,a,s=r(1),o=r.n(s),c=r(9),i=r.n(c),u=r(5),l=r(14),d=r.n(l),h=function(e){if(!e)return"\u2014";if("string"===typeof e)return e;var t=d()();return e>1e-6?t(e):Number(e).toFixed(10)},b=r(10),m=r.n(b),j=r(0),f=r(29).useIsVisible,O=function(e){var t=e.value,r=e.id,n=e.groupId,a=e.allowComparing,o=void 0!==a&&a,c=Object(s.useRef)(null),i=f(c),u=Object(s.useRef)();return Object(s.useEffect)((function(){if(o&&u.current!==t)if(i){if(u.current&&c.current){var e=u.current<t;c.current.className=e?m.a.more:m.a.less}setTimeout((function(){c.current&&(c.current.className="")}),100),u.current=t}else u.current=t}),[c,o,r,n,t,i]),Object(j.jsx)("td",{ref:c,children:h(t)})},g=o.a.memo(O),p=function(e){var t=e.value;return Object(j.jsx)("td",{children:t})},x=o.a.memo(p),T=r(15),k=r.n(T),v=function(e){var t=e.rowData;return Object(j.jsxs)("tr",{className:k.a.root,children:[Object(j.jsx)(x,{value:t.ticker}),Object(j.jsx)(g,{value:t.bid,id:"bid",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.ask,id:"ask",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.high,id:"high",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.low,id:"low",groupId:t.id,allowComparing:!0}),Object(j.jsx)(g,{value:t.last,id:"last",groupId:t.id,allowComparing:!0})]})},S=o.a.memo(v),w=r(16),C=r.n(w),y=r(17),_=r.n(y);!function(e){e.TICKER="id",e.BID="bid",e.ASK="ask",e.HIGH="high",e.LOW="low",e.LAST="last"}(n||(n={})),function(e){e.ASC="asc",e.DESC="desc"}(a||(a={}));var E=function(e){var t=e.sortType,r=e.sortOrder,s=e.onSort,o=function(e,t){return function(r){if(r===e)return _()({"fas fa-sort-amount-up":t===a.ASC,"fas fa-sort-amount-down":t===a.DESC})}}(t,r),c=function(e){return function(){return s(e,e!==t?a.DESC:r===a.DESC?a.ASC:a.DESC)}};return Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:C.a.root,children:[Object(j.jsxs)("th",{onClick:c(n.TICKER),children:["Ticker ",Object(j.jsx)("span",{className:o(n.TICKER)})]}),Object(j.jsxs)("th",{onClick:c(n.BID),children:["Bid ",Object(j.jsx)("span",{className:o(n.BID)})]}),Object(j.jsxs)("th",{onClick:c(n.ASK),children:["Ask ",Object(j.jsx)("span",{className:o(n.ASK)})]}),Object(j.jsxs)("th",{onClick:c(n.HIGH),children:["High ",Object(j.jsx)("span",{className:o(n.HIGH)})]}),Object(j.jsxs)("th",{onClick:c(n.LOW),children:["Low ",Object(j.jsx)("span",{className:o(n.LOW)})]}),Object(j.jsxs)("th",{onClick:c(n.LAST),children:["Last ",Object(j.jsx)("span",{className:o(n.LAST)})]})]})})},L=o.a.memo(E),I=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onSort,a=e.sortType,s=e.sortOrder;return Object(j.jsxs)("table",{cellPadding:"0",cellSpacing:"0",children:[Object(j.jsx)(L,{onSort:n,sortOrder:s,sortType:a}),Object(j.jsx)("tbody",{children:u.map(r,(function(e,t){return Object(j.jsx)(S,{rowData:e},e.id)}))})]})},N=o.a.memo(I),R=r(18),D=r.n(R),A=function(e){var t=e.showPrimary,r=e.onToggle,n=e.primaryText,a=e.secondText;return Object(j.jsx)("span",{onClick:r,className:D.a.root,children:t?n:a})},q=o.a.memo(A),F=r(6),H=r.n(F),P=function(e){var t=e.showAllToggle,r=e.table,n=e.themeToggle,a=e.webSocketsStats;return Object(j.jsx)("div",{className:H.a.root,children:Object(j.jsxs)("div",{className:H.a.wrapper,children:[Object(j.jsx)("h1",{children:"Realtime Crypto Trading"}),Object(j.jsxs)("div",{className:H.a.header,children:[t,a,n]}),r]})})},B=o.a.memo(P),K=r(2),M=r(21),W=r(11),G=r.n(W),J=r(19),Q=r(20),V=function e(t){var r=this;Object(Q.a)(this,e),this.requestId=0,this.requestResolvers={},this.socket=void 0,this.currenciesStore={},this.callbacks=[],this.onChange=function(e){r.callbacks.push(e)},this.offChange=function(e){var t=r.callbacks.indexOf(e);-1!==t&&r.callbacks.splice(t,1)},this.handleOpen=Object(J.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getSymbols();case 2:e.sent.result.forEach((function(e,t){r.currenciesStore[e.id]=e,r.subscribeTicker(e.id).catch((function(t){console.warn("No able to make subscription for "+e.id+". Error: "+t)}))}));case 4:case"end":return e.stop()}}),e)}))),this.handleMessage=function(e){var t=JSON.parse(e.data);if("id"in t)return r.requestResolvers[t.id]&&r.requestResolvers[t.id](t);if("ticker"===t.method){var n=t,a=r.currenciesStore[n.params.symbol];r.callbacks.forEach((function(e){return e(a,n.params)}))}},this.getSymbols=function(){return r.makeRequest("getSymbols",{})},this.subscribeTicker=function(e){return r.makeRequest("subscribeTicker",{symbol:e})},this.makeRequest=function(e,t){var n=++r.requestId;return r.socket.send(JSON.stringify({method:e,params:t,id:n})),new Promise((function(e){r.requestResolvers[n]=e}))},this.socket=new WebSocket(t),this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("message",this.handleMessage)},U=r(3),z=r.n(U),X=Date.now(),Y=function(e){var t=Object(s.useState)({data:{},webSocketsStats:0,sortType:n.BID,sortOrder:a.DESC,limit:e,theme:z.a.lightTheme}),r=Object(M.a)(t,2),c=r[0],i=r[1],l=Object(s.useRef)({}),d=o.a.useRef(0),h=o.a.useRef(0),b=o.a.useRef(0),m=Object(s.useCallback)((function(e){e-h.current>200&&(i((function(e){var t=Math.round(b.current/(Date.now()-X)*1e3);return Object(K.a)(Object(K.a)({},e),{},{webSocketsStats:t,data:Object(K.a)(Object(K.a)({},e.data),l.current)})})),h.current=e),d.current=requestAnimationFrame(m)}),[]);o.a.useEffect((function(){return d.current=requestAnimationFrame(m),function(){return cancelAnimationFrame(d.current)}}),[m]);var j=Object(s.useCallback)((function(e,t){var r=function(e,t){return{id:e.id,ticker:"".concat(e.baseCurrency," / ").concat(e.feeCurrency),bid:parseFloat(t.bid),ask:parseFloat(t.ask),high:parseFloat(t.high),last:parseFloat(t.last),low:parseFloat(t.low)}}(e,t);l.current[r.id]=r,b.current++}),[]);Object(s.useEffect)((function(){var e=new V("wss://api.exchange.bitcoin.com/api/2/ws");return e.onChange(j),function(){return e.offChange(j)}}),[j]);var f=Object(s.useMemo)((function(){return u.chain(c.data).map().sortBy((function(e){return e.last})).reverse().slice(0,c.limit).sortBy((function(e){return e[c.sortType]?e[c.sortType]:0})).thru((function(e){return c.sortOrder===a.DESC&&e.reverse(),e})).value()}),[c]),O=Object(s.useCallback)((function(e,t){return i((function(r){return Object(K.a)(Object(K.a)({},r),{},{sortType:e,sortOrder:t})}))}),[]),g=Object(s.useCallback)((function(){i((function(t){return Object(K.a)(Object(K.a)({},t),{},{limit:t.limit?void 0:e})}))}),[e]),p=c.theme===z.a.lightTheme,x=Object(s.useCallback)((function(){i((function(e){return Object(K.a)(Object(K.a)({},e),{},{theme:p?z.a.darkTheme:z.a.lightTheme})}))}),[p]);return Object(K.a)(Object(K.a)({filteredData:f},c),{},{isLightTheme:p,onSort:O,onLimitToggle:g,onThemeToggle:x})},Z=function(e){Object(s.useEffect)((function(){return document.body.classList.add(e),function(){document.body.classList.remove(e)}}),[e])};function $(){var e=Y(25),t=e.webSocketsStats,r=e.theme,n=e.limit,a=e.sortType,s=e.sortOrder,o=e.filteredData,c=e.onLimitToggle,i=e.onThemeToggle,u=e.isLightTheme,l=e.onSort;return Z(r),Object(j.jsx)(B,{themeToggle:Object(j.jsx)(q,{showPrimary:u,primaryText:"Dark theme",secondText:"Light theme",onToggle:i}),webSocketsStats:Object(j.jsxs)("i",{children:["Websocket events per second (average): ",t]}),showAllToggle:Object(j.jsx)(q,{showPrimary:!!n,onToggle:c,primaryText:"Show All",secondText:"Show top ".concat(25)}),table:Object(j.jsx)(N,{data:o,sortOrder:s,sortType:a,onSort:l})})}var ee=o.a.memo($);var te=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(ee,{})})};i.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(te,{})}),document.getElementById("root"))},6:function(e,t,r){e.exports={root:"PageExchangeQuotesLayout_root__3yjHe",wrapper:"PageExchangeQuotesLayout_wrapper__q5U5K",header:"PageExchangeQuotesLayout_header__2Sd9s"}}},[[53,1,2]]]);
//# sourceMappingURL=main.97a4b738.chunk.js.map